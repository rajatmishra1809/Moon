<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moon - Tarot Card Reading</title>
    <!-- Google Fonts: Cinzel Decorative -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles from index.html for consistency */
        body {
            transition: background-color 0.3s ease, color 0.3s ease;
            font-family: "Inter", sans-serif;
            position: relative; /* Needed for z-index of background */
            overflow-x: hidden;
        }
        .light body {
            background-color: #f0e6ef;
            color: #333;
        }
        .dark body {
            background-color: #1a022b;
            color: #e0d9e7;
        }
        .dark .bg-gradient-to-r {
            background-image: linear-gradient(to right, #2b0c47, #4b1a7d);
        }
        .dark .bg-gray-800 {
            background-color: #2b0c47;
        }
        .dark .text-gray-300 {
            color: #c9b1d6;
        }
        /* Apply Cinzel Decorative font to the main heading */
        .font-cinzel {
            font-family: 'Cinzel Decorative', cursive;
        }
        /* Tarot card deck effect */
        .tarot-deck {
            position: relative;
            width: 150px;
            height: 250px;
            margin: 0 auto;
        }
        .tarot-card-stack {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 2px solid #a855f7; /* Purple border */
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            background-color: #3b0764; /* Deep purple for card backs */
            transform-origin: center center;
            transition: transform 0.5s ease;
            cursor: pointer;
        }
        .tarot-card-stack:nth-child(1) { transform: rotate(0deg); z-index: 10; }
        .tarot-card-stack:nth-child(2) { transform: rotate(2deg); z-index: 9; }
        .tarot-card-stack:nth-child(3) { transform: rotate(-2deg); z-index: 8; }
        .tarot-card-stack:nth-child(4) { transform: rotate(4deg); z-index: 7; }
        .tarot-card-stack:nth-child(5) { transform: rotate(-4deg); z-index: 6; }
        .tarot-card-stack::before {
            content: "âœ¨"; /* Mystic icon for card back */
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: rgba(255, 255, 255, 0.7);
        }
        .tarot-card-stack:hover {
            transform: scale(1.05) rotate(0deg) !important; /* Emphasize hover for interaction */
            box-shadow: 0 8px 20px rgba(168, 85, 247, 0.7); /* Brighter shadow on hover */
        }

        .drawn-card-container {
            min-height: 350px; /* Ensure space for card even when empty */
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        .dark .drawn-card-container {
            background-color: #3b0764; /* Darker purple for drawn card container */
        }

        /* --- Cosmic Background Styles --- */
        .cosmic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Send it to the back */
            overflow: hidden;
            pointer-events: none; /* Allows clicks to pass through */
        }

        /* Starry effect using radial gradients */
        .cosmic-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                /* Smallest stars */
                radial-gradient(2px 2px at 20% 30%, #ffffff, rgba(255,255,255,0)),
                radial-gradient(2px 2px at 70% 80%, #ffffff, rgba(255,255,255,0)),
                radial-gradient(1px 1px at 90% 10%, #ffffff, rgba(255,255,255,0)),
                radial-gradient(1px 1px at 5% 50%, #ffffff, rgba(255,255,255,0)),
                radial-gradient(2px 2px at 40% 60%, #ffffff, rgba(255,255,255,0)),
                /* Larger stars / distant galaxies */
                radial-gradient(3px 3px at 50% 20%, #ffe9c9, rgba(255,255,255,0)),
                radial-gradient(2px 2px at 10% 90%, #e0f2f7, rgba(255,255,255,0)),
                radial-gradient(2px 2px at 80% 40%, #ffebcd, rgba(255,255,255,0));
            background-repeat: repeat;
            background-size: 200px 200px; /* Adjust density of stars */
            opacity: 0.7;
            animation: twinkle 10s infinite alternate;
        }

        /* Moon effect */
        .cosmic-background::after {
            content: '';
            position: absolute;
            width: 120px; /* Size of the moon */
            height: 120px;
            background: radial-gradient(circle at 30% 30%, #fefce8, #d4d4d4); /* Moon texture */
            border-radius: 50%;
            top: 5%; /* Position from top */
            right: 5%; /* Position from right */
            box-shadow: 0 0 40px 15px rgba(255, 255, 255, 0.3), /* Outer glow */
                        0 0 80px 30px rgba(255, 255, 255, 0.1), /* Even wider glow */
                        inset 0 0 15px rgba(0, 0, 0, 0.2); /* Inner shadow for depth */
            filter: blur(0.5px); /* Soften the edges slightly */
            animation: moonGlow 5s infinite alternate;
        }

        @keyframes twinkle {
            0% { opacity: 0.7; }
            50% { opacity: 0.9; }
            100% { opacity: 0.7; }
        }

        @keyframes moonGlow {
            0% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.02); opacity: 1; }
            100% { transform: scale(1); opacity: 0.9; }
        }

        /* Ensure content is above the background */
        main, footer, header {
            position: relative;
            z-index: 1;
        }
    </style>
    <!-- Font Awesome for dark mode toggle icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="min-h-screen flex flex-col">
    <div class="cosmic-background"></div> <!-- Background elements container -->

    <header class="bg-gradient-to-r from-purple-900 to-indigo-900 shadow-lg p-4 flex justify-between items-center relative z-20">
        <h1 class="text-3xl font-bold text-white tracking-wider"><a href="/" class="hover:text-purple-200 font-cinzel">Moon</a></h1>
        <div class="relative">
            <button id="theme-toggle" class="p-2 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 focus:outline-none focus:ring-2 focus:ring-white transition-colors duration-300">
                <i class="fas fa-sun text-yellow-300 text-xl" id="theme-toggle-icon"></i>
            </button>
        </div>
    </header>

    <main class="flex-grow flex flex-col items-center p-6">
        <h2 class="text-4xl font-extrabold mb-10 drop-shadow-lg text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-500">
            Unveil Your Tarot Reading
        </h2>

        <div id="card-selection-area" class="flex flex-col items-center mb-8">
            <p class="text-xl mb-6 text-gray-700 dark:text-gray-300">Click on the deck to draw your card!</p>
            <div class="tarot-deck cursor-pointer" onclick="drawTarotCard()">
                <!-- Simulate a stack of cards -->
                <div class="tarot-card-stack"></div>
                <div class="tarot-card-stack"></div>
                <div class="tarot-card-stack"></div>
                <div class="tarot-card-stack"></div>
                <div class="tarot-card-stack"></div>
            </div>
            <button id="draw-again-btn" class="hidden mt-6 bg-purple-700 hover:bg-purple-800 text-white font-bold py-3 px-6 rounded-xl shadow-md transition-colors duration-300" onclick="resetTarot()">Draw Another Card</button>
        </div>

        <div id="drawn-card-display" class="drawn-card-container hidden flex flex-col items-center text-center p-8 w-full max-w-lg">
            <img id="drawn-card-image" src="" alt="Drawn Tarot Card" class="w-48 h-auto rounded-lg shadow-md mb-6 border-2 border-purple-400">
            <h3 id="drawn-card-name" class="text-3xl font-bold mb-3 text-purple-700 dark:text-purple-200"></h3>
            <p id="drawn-card-meaning" class="text-lg leading-relaxed text-gray-800 dark:text-gray-200"></p>
        </div>
    </main>

    <footer class="bg-gray-800 text-gray-300 py-4 text-center text-sm shadow-inner mt-auto">
        <p>&copy; 2025 Moon. All rights reserved.</p>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
